{
  "version": 3,
  "sources": ["../components/monitor.ts", "../main.ts"],
  "sourcesContent": ["declare const window: any;\ndeclare global { interface Window { __TAURI__?: any } }\n// safe invoke wrapper: in Tauri runtime window.__TAURI__.core.invoke exists;\n// in tests it may be undefined, so provide a stub that throws to make failures explicit.\nconst invoke: (...args: any[]) => Promise<any> = (window && (window as any).__TAURI__ && (window as any).__TAURI__.core && (window as any).__TAURI__.core.invoke)\n  ? (window as any).__TAURI__.core.invoke.bind((window as any).__TAURI__.core)\n  : async () => { throw new Error('Tauri invoke not available in test environment'); };\n\nexport const latestWords: { [k:string]: number } = {};\nlet currentFormatInternal = 'U16';\n\nexport function getCurrentFormat() { return currentFormatInternal; }\nexport function setCurrentFormat(fmt: string) { currentFormatInternal = fmt; refreshAllRows(); try { if (window.localStorage) window.localStorage.setItem('displayFormat', currentFormatInternal); } catch(e) {} }\n\nexport function refreshAllRows() {\n  for (const k in latestWords) {\n    const [key, addrStr] = k.split(':');\n    const addr = parseInt(addrStr, 10);\n    const w = latestWords[k];\n    renderRowForWord(key, addr, w);\n  }\n  if (['U32','I32','F32'].includes(currentFormatInternal)) {\n    for (const k in latestWords) {\n      const [key, addrStr] = k.split(':');\n      const addr = parseInt(addrStr, 10);\n      if (addr % 2 === 0) {\n        const trOdd = document.getElementById(`row-${key}-${addr+1}`);\n        if (trOdd) trOdd.classList.add('paired-empty');\n      }\n    }\n  } else {\n    document.querySelectorAll('#monitor-tbody tr.paired-empty').forEach(r => r.classList.remove('paired-empty'));\n  }\n}\n\nfunction uiLog(msg: string) {\n  try {\n    const out = document.getElementById('monitor-log') as HTMLPreElement | null;\n    const ts = new Date().toISOString();\n    if (out) out.textContent = `${ts} ${msg}\\n` + out.textContent;\n    else console.log('[MON]', ts, msg);\n  } catch (e) { try { console.log('[MON]', msg, e); } catch(_) {} }\n}\n\nexport function parseTarget(s: string | null) {\n  if (!s) return null;\n  const up = s.toUpperCase().trim();\n  let i = 0; while (i < up.length && /[A-Z]/.test(up[i])) i++;\n  if (i === 0) return null;\n  let key = up.slice(0, i);\n  let numPart = up.slice(i).trim();\n  // handle cases like 'WFF' where the address is hex letters following a single-letter device code\n  if (!numPart && key.length > 1) {\n    numPart = key.slice(1);\n    key = key[0];\n  }\n  if (!numPart) return null;\n  const isHex = /[A-F]/i.test(numPart);\n  const addr = isHex ? parseInt(numPart, 16) : parseInt(numPart, 10);\n  if (Number.isNaN(addr)) return null;\n  return { key, addr };\n}\n\nexport function createInitialRows(key: string, addr: number, count: number) {\n  for (let i = 0; i < count; i++) setWordRow(key, addr + i, 0);\n}\n\nexport function setWordRow(key: string, addr: number, word: number) {\n  try {\n    latestWords[`${key}:${addr}`] = word & 0xffff;\n    renderRowForWord(key, addr, word & 0xffff);\n    if (['U32','I32','F32'].includes(currentFormatInternal)) {\n      if (addr % 2 === 1) {\n        const evenAddr = addr - 1;\n        const evenKey = `${key}:${evenAddr}`;\n        if (latestWords[evenKey] !== undefined) renderRowForWord(key, evenAddr, latestWords[evenKey]);\n      } else {\n        const oddKey = `${key}:${addr+1}`;\n        if (latestWords[oddKey] !== undefined) renderRowForWord(key, addr+1, latestWords[oddKey]);\n      }\n    }\n  } catch (err) { console.warn('setWordRow failed', err); }\n}\n\nfunction renderRowForWord(key: string, addr: number, word: number) {\n  try {\n    const tbody = document.getElementById('monitor-tbody') as HTMLTableSectionElement | null;\n    if (!tbody) return;\n    const rowId = `row-${key}-${addr}`;\n    let tr = document.getElementById(rowId) as HTMLTableRowElement | null;\n    if (!tr) {\n      tr = document.createElement('tr');\n      tr.id = rowId;\n      const tdLabel = document.createElement('td');\n      tdLabel.className = 'device-label';\n      tdLabel.textContent = `${key}${addr}`;\n      tr.appendChild(tdLabel);\n      for (let b = 15; b >= 0; b--) {\n        const td = document.createElement('td');\n        td.className = 'bit-cell bit-off';\n        td.dataset.bitIndex = b.toString();\n        tr.appendChild(td);\n      }\n      const tdFormat = document.createElement('td'); tdFormat.className = 'format-cell'; tr.appendChild(tdFormat);\n      const tdRaw = document.createElement('td'); tdRaw.className = 'raw-cell'; tr.appendChild(tdRaw);\n      tbody.appendChild(tr);\n      tr.addEventListener('click', () => { try { selectRow(key, addr); } catch (e) {} });\n    }\n    const bitCells = tr.querySelectorAll('td.bit-cell');\n    if (!bitCells || bitCells.length < 16) return;\n    for (let i = 0; i < 16; i++) {\n      const b = 15 - i;\n      const on = ((word >> b) & 1) === 1;\n      const cell = bitCells[i];\n      if (cell) {\n        if (on) { cell.classList.remove('bit-off'); cell.classList.add('bit-on'); }\n        else { cell.classList.remove('bit-on'); cell.classList.add('bit-off'); }\n      }\n    }\n    const formatCell = tr.querySelector('td.format-cell') as HTMLTableCellElement | null;\n    const rawCell = tr.querySelector('td.raw-cell') as HTMLTableCellElement | null;\n    const u16 = word & 0xffff;\n    const hex = `0x${u16.toString(16).toUpperCase().padStart(4,'0')}`;\n    let s16 = u16; if ((u16 & 0x8000) !== 0) s16 = u16 - 0x10000;\n    tr.classList.remove('paired-empty');\n    if (['U32','I32','F32'].includes(currentFormatInternal)) {\n      if (addr % 2 === 0) {\n        const keyHigh = `${key}:${addr+1}`;\n        const low = latestWords[`${key}:${addr}`] !== undefined ? latestWords[`${key}:${addr}`] : u16;\n        const high = latestWords[keyHigh] !== undefined ? latestWords[keyHigh] : undefined;\n        if (high === undefined) {\n          if (formatCell) formatCell.textContent = '';\n          if (rawCell) rawCell.textContent = hex;\n        } else {\n          const low32 = low & 0xffff;\n          const high32 = high & 0xffff;\n          const u32 = ((high32 << 16) >>> 0) | (low32 & 0xffff);\n          if (currentFormatInternal === 'U32') { if (formatCell) formatCell.textContent = `${u32 >>> 0}`; }\n          else if (currentFormatInternal === 'I32') { const i32 = (u32 & 0x80000000) ? (u32 - 0x100000000) : u32; if (formatCell) formatCell.textContent = `${i32}`; }\n          else if (currentFormatInternal === 'F32') { const buf = new ArrayBuffer(4); const dv = new DataView(buf); dv.setUint32(0, u32 >>> 0, true); const f = dv.getFloat32(0, true); if (formatCell) formatCell.textContent = `${f}`; }\n          if (rawCell) rawCell.textContent = `0x${u32.toString(16).toUpperCase().padStart(8,'0')}`;\n        }\n        const trOdd = document.getElementById(`row-${key}-${addr+1}`);\n        if (trOdd) trOdd.classList.add('paired-empty');\n      } else {\n        if (formatCell) formatCell.textContent = '';\n        if (rawCell) rawCell.textContent = '';\n        tr.classList.add('paired-empty');\n      }\n    } else {\n      if (currentFormatInternal === 'BIN') { if (formatCell) formatCell.textContent = `0b${u16.toString(2).padStart(16,'0')}`; }\n      else if (currentFormatInternal === 'U16') { if (formatCell) formatCell.textContent = `${u16}`; }\n      else if (currentFormatInternal === 'I16') { if (formatCell) formatCell.textContent = `${s16}`; }\n      else if (currentFormatInternal === 'HEX') { if (formatCell) formatCell.textContent = `${hex}`; }\n      else if (currentFormatInternal === 'ASCII') { const hi = (u16 >> 8) & 0xff; const lo = u16 & 0xff; const a = (hi >= 32 && hi <= 126) ? String.fromCharCode(hi) : '.'; const b = (lo >= 32 && lo <= 126) ? String.fromCharCode(lo) : '.'; if (formatCell) formatCell.textContent = `${a}${b}`; }\n      else { if (formatCell) formatCell.textContent = `${u16}`; }\n      if (rawCell) rawCell.textContent = hex;\n    }\n  } catch (err) { console.warn('renderRowForWord failed', err); }\n}\n\nlet eventApiAvailable = false; let monitorFallbackId: any = null;\nexport async function startFallbackPolling(key: string, addr: number, intervalMs: number) {\n  stopFallbackPolling(); const count = 30;\n  uiLog(`startFallbackPolling ${key}${addr} interval=${intervalMs}`);\n  monitorFallbackId = setInterval(async () => {\n    try {\n      const vals = await invoke('get_words', { key: key, addr: addr, count: count });\n      for (let i = 0; i < vals.length; i++) setWordRow(key, addr + i, vals[i] & 0xffff);\n    } catch (e) { console.warn('fallback get_words failed', e); uiLog(`fallback get_words failed: ${e}`); }\n  }, intervalMs);\n}\nexport function stopFallbackPolling() { if (monitorFallbackId) { clearInterval(monitorFallbackId); monitorFallbackId = null; uiLog('stopFallbackPolling'); } }\n\nexport function selectRow(key: string, addr: number, retries = 6) {\n  const prev = document.querySelector('#monitor-tbody tr.selected-row') as HTMLTableRowElement | null;\n  if (prev) prev.classList.remove('selected-row');\n  const id = `row-${key}-${addr}`;\n  const tr = document.getElementById(id) as HTMLTableRowElement | null;\n  if (!tr) {\n    if (retries > 0) { setTimeout(() => { try { selectRow(key, addr, retries - 1); } catch (e) {} }, 60); }\n    return;\n  }\n  tr.classList.add('selected-row');\n  try { tr.scrollIntoView({ block: 'nearest', inline: 'nearest' }); } catch (e) {}\n  try { const mt = document.getElementById('monitor-table') as HTMLElement | null; if (mt && typeof (mt as any).focus === 'function') try { (mt as any).focus(); } catch (e) {} } catch (e) {}\n  try { const ev = new CustomEvent('melsec_row_selected', { detail: { key, addr } }); document.dispatchEvent(ev); } catch (e) {}\n}\n\nexport function isEventApiAvailable() { return eventApiAvailable; }\n\nexport async function initEventListeners() {\n  if (window.__TAURI__ && window.__TAURI__.event && window.__TAURI__.event.listen) {\n    try {\n      uiLog('initEventListeners: Tauri event API available, registering listeners');\n      await window.__TAURI__.event.listen('monitor', (event: any) => {\n        const payload = event.payload; try {\n          const addr = payload.addr; const key = payload.key; const vals: number[] = payload.vals || [];\n          // UI-visible debug: log minimal payload so developer can correlate with backend\n          try { uiLog(`monitor event received key=${key} addr=${addr} vals0=${vals.length>0?vals[0]:'<empty>'} len=${vals.length}`); } catch(e) {}\n          if (vals.length === 0) setWordRow(key, addr, 0);\n          else for (let i = 0; i < vals.length; i++) setWordRow(key, addr + i, vals[i] & 0xffff);\n        } catch (e) {}\n      });\n      await window.__TAURI__.event.listen('server-status', (event: any) => {\n        const payload = event.payload; const status = document.getElementById('server-status'); if (status) { status.textContent = payload; (status as HTMLElement).style.color = (payload === '\u8D77\u52D5\u4E2D') ? 'green' : 'black'; }\n        try { uiLog(`server-status event: ${payload}`); } catch(e) {}\n        try {\n          if (payload === '\u8D77\u52D5\u4E2D') {\n            const mt = document.getElementById('monitor-table') as HTMLElement | null;\n            if (mt && typeof (mt as any).focus === 'function') try { (mt as any).focus(); } catch (e) {}\n            try {\n              const rawEl = document.getElementById('mon-target') as HTMLInputElement | null;\n              const raw = rawEl ? (rawEl.value || 'D') : 'D';\n              let parsed: any = parseTarget(raw.toString().trim().toUpperCase());\n              if (!parsed) parsed = { key: raw.replace(/[^A-Z]/g, ''), addr: 0 } as any;\n              if (parsed) try { selectRow(parsed.key, parsed.addr); } catch (e) {}\n            } catch (e) {}\n          }\n        } catch (e) {}\n      });\n      eventApiAvailable = true;\n    } catch (e) { console.warn('event.listen not allowed, falling back to frontend polling', e); uiLog(`event.listen not allowed, falling back to polling: ${e}`); eventApiAvailable = false; }\n  } else { console.warn('Tauri event API not available'); uiLog('Tauri event API not available'); eventApiAvailable = false; }\n}\n\n", "// TypeScript version of the frontend main script.\n// Minimal typing to avoid compile friction. This file is intended to be built\n// to `dist/main.js` (see package.json scripts).\n\n// Full TypeScript port of the previous main.js logic.\ndeclare const window: any;\n// allow referencing window.__TAURI__ in TS\ndeclare global { interface Window { __TAURI__?: any } }\nconst { invoke } = (window as any).__TAURI__.core as any;\n\nimport { getCurrentFormat, setCurrentFormat, parseTarget, createInitialRows, startFallbackPolling, stopFallbackPolling, selectRow, setWordRow, isEventApiAvailable, initEventListeners } from './components/monitor';\n\nconst els: { [k: string]: HTMLElement | HTMLInputElement | null } = {} as any;\n\nfunction logMonitor(msg: string) {\n  const out = document.getElementById('monitor-log') as HTMLPreElement | null;\n  const ts = new Date().toISOString();\n  if (out) {\n    out.textContent = `${ts} ${msg}\\n` + out.textContent;\n  } else {\n    console.log('[LOG]', ts, msg);\n  }\n}\n\nasync function startMock(tcpPort: number, udpPort: number, timAwaitMs: number) {\n  // IP is fixed to 0.0.0.0 per UX decision\n  const ip = '0.0.0.0';\n  try {\n    await invoke('start_mock', { ip, tcpPort, udpPort, timAwaitMs });\n    logMonitor(`[TS] start_mock invoked ip=${ip} tcp=${tcpPort} udp=${udpPort} tim=${timAwaitMs}`);\n    const status = document.getElementById('server-status');\n    if (status) {\n      status.textContent = '\u8D77\u52D5\u4E2D';\n      (status as HTMLElement).style.color = 'green';\n    }\n  } catch (e) {\n    logMonitor(`[TS] start_mock error: ${e}`);\n    const status = document.getElementById('server-status');\n    if (status) {\n      status.textContent = '\u8D77\u52D5\u5931\u6557';\n      (status as HTMLElement).style.color = 'red';\n    }\n  }\n}\n\nasync function startMonitorForTarget(targetKey: string, addr: number) {\n  const backendTarget = `${targetKey}${addr}`;\n  const interval_ms = 500; // fixed internally per spec\n  try {\n    await invoke('start_monitor', { target: backendTarget, intervalMs: interval_ms });\n    logMonitor(`[TS] start_monitor ${backendTarget} interval=${interval_ms}`);\n  } catch (e) {\n    logMonitor(`[TS] start_monitor error: ${e}`);\n  }\n}\n\nasync function stopMonitor() {\n  try {\n    await invoke('stop_monitor');\n    logMonitor('[TS] stop_monitor invoked');\n  } catch (e) {\n    logMonitor(`[TS] stop_monitor error: ${e}`);\n  }\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  // collect elements (IP is fixed and removed from UI)\n  ['tcp-port','udp-port','tim-await','mock-toggle','mon-target','mon-toggle','auto-start-next'].forEach(id => {\n    els[id] = document.getElementById(id) as any;\n  });\n\n  // allow pressing Enter when a row is selected (and focus is not on an input)\n  window.addEventListener('keydown', async (ev: KeyboardEvent) => {\n    if (ev.key !== 'Enter') return;\n    const active = document.activeElement as HTMLElement | null;\n    if (active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA' || active.isContentEditable)) return;\n    const selected = document.querySelector('#monitor-tbody tr.selected-row') as HTMLTableRowElement | null;\n    if (!selected) return;\n    const m = selected.id.match(/^row-(.+)-(\\d+)$/);\n    if (!m) return;\n    ev.preventDefault();\n    const k = m[1]; const a = parseInt(m[2], 10);\n    // open edit popup for selected row (follow selection)\n    try { showEditModal(k, a); } catch (err) { console.warn('showEditModal failed', err); }\n  });\n\n  ['set-key','set-addr','set-val','set-word'].forEach(id => {\n    els[id] = document.getElementById(id) as any;\n  });\n\n  // mock toggle behaviour: Start Mock <-> Stop Mock\n  let mockRunning = false;\n  const mockBtn = els['mock-toggle'] as HTMLButtonElement;\n  if (mockBtn) {\n    mockBtn.addEventListener('click', async (ev) => {\n      ev.preventDefault();\n      const tcp_port = parseInt((els['tcp-port'] as HTMLInputElement).value || '5000', 10);\n      const udp_port = parseInt((els['udp-port'] as HTMLInputElement).value || '5001', 10);\n      const tim_await_ms = parseInt((els['tim-await'] as HTMLInputElement).value || '5000', 10);\n      if (!mockRunning) {\n        await startMock(tcp_port, udp_port, tim_await_ms);\n        mockRunning = true;\n        mockBtn.textContent = 'Stop Mock';\n        mockBtn.style.background = '#d9534f';\n        // persist auto-start preference\n        try {\n          const autoEl = els['auto-start-next'] as HTMLInputElement | null;\n          if (autoEl && window.localStorage) {\n            if (autoEl.checked) window.localStorage.setItem('autoStartNext', '1');\n            else window.localStorage.removeItem('autoStartNext');\n          }\n        } catch (e) {}\n        // start monitor for current target (30 items)\n  const rawTarget = ((els['mon-target'] as HTMLInputElement).value || 'D').toString().trim().toUpperCase();\n  let parsed: any = parseTarget(rawTarget);\n  if (!parsed) parsed = { key: rawTarget.replace(/[^A-Z]/g, ''), addr: 0 } as any;\n        try { createInitialRows(parsed.key, parsed.addr, 30); } catch (e) {}\n        await startMonitorForTarget(parsed.key, parsed.addr);\n  if (!isEventApiAvailable()) startFallbackPolling(parsed.key, parsed.addr, 500);\n        // select and focus the initial row now that server is running\n        try { selectRow(parsed.key, parsed.addr); const mt = document.getElementById('monitor-table') as HTMLElement | null; if (mt && typeof (mt as any).focus === 'function') (mt as any).focus(); } catch (e) {}\n      } else {\n        // stop monitor then stop mock\n        try { await stopMonitor(); } catch (e) {}\n        try { await invoke('stop_mock'); } catch (e) { logMonitor(`[TS] stop_mock error: ${e}`); }\n        mockRunning = false;\n        mockBtn.textContent = 'Start Mock';\n        mockBtn.style.background = '#4da6ff';\n        stopFallbackPolling();\n        const status = document.getElementById('server-status'); if (status) { status.textContent = '\u505C\u6B62\u4E2D'; (status as HTMLElement).style.color = 'black'; }\n      }\n    });\n    // give initial focus to Start Mock button\n    try { mockBtn.focus(); } catch (e) {}\n    // if auto-start preference is set, trigger click to start mock\n    try {\n      const autoEl = els['auto-start-next'] as HTMLInputElement | null;\n      if (autoEl && autoEl.checked) {\n        setTimeout(() => { try { if (!mockRunning) mockBtn.click(); } catch (e) {} }, 150);\n      }\n    } catch (e) { /* ignore */ }\n  }\n\n  // (initial rows creation moved further down after latestWords initialization)\n\n  // initialize auto-start checkbox from localStorage and set initial focus to Start Mock\n  try {\n    const autoEl = els['auto-start-next'] as HTMLInputElement | null;\n    if (autoEl && window.localStorage) {\n      const saved = window.localStorage.getItem('autoStartNext');\n      if (saved === '1') autoEl.checked = true;\n    }\n  } catch (e) { /* ignore */ }\n\n  // Target change on Enter: update displayed range and, if running, restart monitor\n  const monTargetEl = els['mon-target'] as HTMLInputElement;\n  if (monTargetEl) {\n    monTargetEl.addEventListener('keydown', async (e) => {\n      if (e.key === 'Enter') {\n        const raw = (monTargetEl.value || '').toString().trim().toUpperCase();\n        let parsed: any = parseTarget(raw);\n        if (!parsed) parsed = { key: raw.replace(/[^A-Z]/g, ''), addr: 0 } as any;\n        try { createInitialRows(parsed.key, parsed.addr, 30); } catch (err) {}\n        // if mock is running, restart monitor for new target\n        if (mockRunning) {\n          try { await stopMonitor(); } catch (err) {}\n          await startMonitorForTarget(parsed.key, parsed.addr);\n          if (!isEventApiAvailable()) startFallbackPolling(parsed.key, parsed.addr, 500);\n        }\n      }\n    });\n  }\n\n  // set-word handler (temporary testing helper)\n  async function setWord() {\n    try {\n      const key = ((els['set-key'] as HTMLInputElement).value || 'D').toString();\n      const addr = parseInt((els['set-addr'] as HTMLInputElement).value || '0', 10);\n      const raw = ((els['set-val'] as HTMLInputElement).value || '0').toString().trim();\n      const parts = raw.split(',').map((s) => s.trim()).filter((s) => s.length > 0);\n      const words = parts.map((p) => {\n        if (/^0x/i.test(p)) return parseInt(p.substring(2), 16) & 0xffff;\n        if (/^[0-9]+$/.test(p)) return parseInt(p, 10) & 0xffff;\n        const v = parseInt(p, 10);\n        return Number.isNaN(v) ? 0 : (v & 0xffff);\n      });\n      await invoke('set_words', { key: key, addr: addr, words: words });\n      logMonitor(`[TS] set_words invoked key=${key} addr=${addr} words=${JSON.stringify(words)}`);\n      if (words.length > 0) setWordRow(key, addr, words[0]);\n    } catch (e) {\n      logMonitor(`[TS] set_words error: ${e}`);\n    }\n  }\n  if (els['set-word']) (els['set-word'] as HTMLElement).addEventListener('click', (e) => { e.preventDefault(); setWord(); });\n\n\n  // restore display format from monitor component\n  try { const saved = window.localStorage ? window.localStorage.getItem('displayFormat') : null; if (saved) setCurrentFormat(saved); } catch (e) { /* ignore */ }\n\n  // initialize toolbar buttons (delegates format change to monitor component)\n  try {\n    const btns = document.querySelectorAll('#display-toolbar .fmt-btn');\n    btns.forEach((b) => {\n      if (!b || typeof (b as any).addEventListener !== 'function') return;\n      const fmt = (b as HTMLElement).getAttribute('data-fmt') || '';\n      if (fmt === getCurrentFormat()) b.classList.add('active');\n      (b as HTMLElement).addEventListener('click', () => {\n        document.querySelectorAll('#display-toolbar .fmt-btn').forEach(x => x.classList.remove('active'));\n        b.classList.add('active');\n        setCurrentFormat(fmt);\n        // also sync edit popup buttons if present\n        try {\n          document.querySelectorAll('#edit-modal .write-type').forEach(x => x.classList.remove('active'));\n          const pb = document.querySelector(`#edit-modal .write-type[data-typ=\"${fmt}\"]`);\n          if (pb) (pb as HTMLElement).classList.add('active');\n          selectedWriteType = fmt;\n        } catch (e) { /* ignore */ }\n      });\n    });\n  } catch (e) { console.warn('failed to init toolbar', e); }\n\n  // monitor functions have been moved to ./components/monitor and are imported above\n  // --- Double-click edit modal handling ---\n  const editModal = document.getElementById('edit-modal') as HTMLDivElement | null;\n  const editTitle = document.getElementById('edit-modal-title') as HTMLHeadingElement | null;\n  const editValue = document.getElementById('edit-value') as HTMLInputElement | null;\n  const editCancel = document.getElementById('edit-cancel') as HTMLButtonElement | null;\n  const editWrite = document.getElementById('edit-write') as HTMLButtonElement | null;\n  let editTarget: { key: string; addr: number } | null = null;\n  let selectedWriteType = 'U16';\n\n  // follow selection: when a row is selected elsewhere, update editTarget and popup title\n  document.addEventListener('melsec_row_selected', (ev: Event) => {\n    try {\n      const d = (ev as CustomEvent).detail as { key: string; addr: number };\n      if (!d) return;\n      // always update internal editTarget so opening the popup uses latest selection\n      editTarget = { key: d.key, addr: d.addr };\n      // always update popup title so it follows selection immediately when visible\n      try {\n        if (editTitle) editTitle.textContent = `Write ${d.key}${d.addr}`;\n        // if popup visible, clear value and focus input so user can type immediately\n        if (editModal && editModal.style.display && editModal.style.display !== 'none') {\n          if (editValue) { editValue.value = ''; try { editValue.focus(); } catch (e) {} }\n        }\n      } catch (e) { /* ignore */ }\n    } catch (e) { /* ignore */ }\n  });\n\n  function showEditModal(key: string, addr: number) {\n    editTarget = { key, addr };\n    if (editTitle) editTitle.textContent = `Write ${key}${addr}`;\n    if (editValue) editValue.value = '';\n  // set initial write-type to current monitor display format\n  selectedWriteType = getCurrentFormat() || 'U16';\n    // highlight current selection\n    document.querySelectorAll('#edit-modal .write-type').forEach(b => b.classList.remove('active'));\n    const btn = document.querySelector(`#edit-modal .write-type[data-typ=\"${selectedWriteType}\"]`);\n    if (btn) btn.classList.add('active');\n    // show as popup (modaless)\n    if (editModal) editModal.style.display = 'block';\n    // focus the value input so user can type immediately\n    try { setTimeout(() => { if (editValue) { editValue.focus(); editValue.select(); } }, 0); } catch (e) { /* ignore */ }\n  }\n\n  // --- drag support for edit popup ---\n  (function setupEditDrag() {\n    const box = document.getElementById('edit-modal-box') as HTMLDivElement | null;\n    const title = document.getElementById('edit-modal-title') as HTMLElement | null;\n    if (!box || !title) return;\n    // style title as drag handle\n    title.style.cursor = 'grab';\n    let dragging = false;\n    let offsetX = 0, offsetY = 0;\n    function onMouseMove(ev: MouseEvent) {\n      if (!dragging) return;\n      const x = ev.clientX - offsetX;\n      const y = ev.clientY - offsetY;\n      // switch to left/top positioning if previously anchored to right/bottom\n      box!.style.left = `${Math.max(0, x)}px`;\n      box!.style.top = `${Math.max(0, y)}px`;\n      box!.style.right = '';\n      box!.style.bottom = '';\n      box!.style.transform = 'none';\n    }\n    function onMouseUp() {\n      if (!dragging) return;\n      dragging = false;\n      title!.style.cursor = 'grab';\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n      // persist position\n      try { savePopupPos(); } catch (e) {}\n    }\n    title.addEventListener('mousedown', (ev) => {\n      ev.preventDefault();\n      const rect = box.getBoundingClientRect();\n      offsetX = ev.clientX - rect.left;\n      offsetY = ev.clientY - rect.top;\n      dragging = true;\n      title.style.cursor = 'grabbing';\n      window.addEventListener('mousemove', onMouseMove);\n      window.addEventListener('mouseup', onMouseUp);\n    });\n    // also support touch\n    title.addEventListener('touchstart', (ev) => {\n      const t = ev.touches[0];\n      if (!t) return;\n      const rect = box.getBoundingClientRect();\n      offsetX = t.clientX - rect.left;\n      offsetY = t.clientY - rect.top;\n      dragging = true;\n      window.addEventListener('touchmove', touchMoveHandler, { passive: false });\n      window.addEventListener('touchend', touchEndHandler);\n    });\n    function touchMoveHandler(ev: TouchEvent) {\n      if (!dragging) return;\n      ev.preventDefault();\n      const t = ev.touches[0]; if (!t) return;\n      const x = t.clientX - offsetX; const y = t.clientY - offsetY;\n  box!.style.left = `${Math.max(0, x)}px`;\n  box!.style.top = `${Math.max(0, y)}px`;\n  box!.style.right = '';\n  box!.style.bottom = '';\n  box!.style.transform = 'none';\n    }\n    function touchEndHandler() { dragging = false; window.removeEventListener('touchmove', touchMoveHandler); window.removeEventListener('touchend', touchEndHandler); try { savePopupPos(); } catch (e) {} }\n    // load persisted position if any\n    try { loadPopupPos(); } catch (e) { /* ignore */ }\n  })();\n\n  function savePopupPos() {\n    try {\n      const box = document.getElementById('edit-modal-box') as HTMLDivElement | null;\n      if (!box) return;\n      const rect = box.getBoundingClientRect();\n      const pos = { left: Math.max(0, Math.round(rect.left)), top: Math.max(0, Math.round(rect.top)) };\n      try { if (window.localStorage) window.localStorage.setItem('editPopupPos', JSON.stringify(pos)); } catch (e) {}\n    } catch (e) { /* ignore */ }\n  }\n\n  function loadPopupPos() {\n    try {\n      const raw = window.localStorage ? window.localStorage.getItem('editPopupPos') : null;\n      if (!raw) return;\n      const pos = JSON.parse(raw) as { left: number; top: number } | null;\n      if (!pos) return;\n      const box = document.getElementById('edit-modal-box') as HTMLDivElement | null;\n      if (!box) return;\n      // clamp to viewport to avoid off-screen positions\n      const bw = box.offsetWidth || 300;\n      const bh = box.offsetHeight || 120;\n      const maxLeft = Math.max(0, (window.innerWidth || 800) - bw);\n      const maxTop = Math.max(0, (window.innerHeight || 600) - bh);\n      const left = Math.min(maxLeft, Math.max(0, pos.left));\n      const top = Math.min(maxTop, Math.max(0, pos.top));\n      box.style.left = `${left}px`;\n      box.style.top = `${top}px`;\n      box.style.right = '';\n      box.style.bottom = '';\n      box.style.transform = 'none';\n      // persist clamped position back to storage\n      try { if (window.localStorage) window.localStorage.setItem('editPopupPos', JSON.stringify({ left, top })); } catch (e) {}\n    } catch (e) { /* ignore */ }\n  }\n\n  // Ensure popup remains within viewport on resize\n  function clampAndSavePopupPos() {\n    try {\n      const box = document.getElementById('edit-modal-box') as HTMLDivElement | null;\n      if (!box) return;\n      const rect = box.getBoundingClientRect();\n      const bw = box.offsetWidth || 300;\n      const bh = box.offsetHeight || 120;\n      const maxLeft = Math.max(0, (window.innerWidth || 800) - bw);\n      const maxTop = Math.max(0, (window.innerHeight || 600) - bh);\n      const left = Math.min(maxLeft, Math.max(0, Math.round(rect.left)));\n      const top = Math.min(maxTop, Math.max(0, Math.round(rect.top)));\n      box.style.left = `${left}px`;\n      box.style.top = `${top}px`;\n      box.style.right = '';\n      box.style.bottom = '';\n      box.style.transform = 'none';\n      try { if (window.localStorage) window.localStorage.setItem('editPopupPos', JSON.stringify({ left, top })); } catch (e) {}\n    } catch (e) { /* ignore */ }\n  }\n\n  window.addEventListener('resize', () => {\n    try { clampAndSavePopupPos(); } catch (e) {}\n  });\n\n  function hideEditModal() {\n    if (editModal) editModal.style.display = 'none';\n    // save position on hide so last-known pos is kept\n    try { savePopupPos(); } catch (e) {}\n    editTarget = null;\n  }\n\n  // click handlers for write-type buttons\n  document.querySelectorAll('#edit-modal .write-type').forEach((el) => {\n    if (!el || typeof (el as any).addEventListener !== 'function') return;\n    (el as HTMLElement).addEventListener('click', (_ev) => {\n      const t = (el as HTMLElement).getAttribute('data-typ') || 'U16';\n      selectedWriteType = t;\n      // highlight popup buttons\n      document.querySelectorAll('#edit-modal .write-type').forEach(b => b.classList.remove('active'));\n      (el as HTMLElement).classList.add('active');\n      // sync to main toolbar selection as well\n      try {\n        document.querySelectorAll('#display-toolbar .fmt-btn').forEach(x => x.classList.remove('active'));\n        const mainBtn = document.querySelector(`#display-toolbar .fmt-btn[data-fmt=\"${t}\"]`);\n        if (mainBtn) (mainBtn as HTMLElement).classList.add('active');\n  setCurrentFormat(t);\n      } catch (e) { /* ignore */ }\n    });\n  });\n\n  if (editCancel) editCancel.addEventListener('click', (e) => { e.preventDefault(); hideEditModal(); });\n\n  // hide popup on Escape key when displayed\n  window.addEventListener('keydown', (ev: KeyboardEvent) => {\n    if (ev.key === 'Escape') {\n      // only hide if edit modal is visible\n      if (editModal && editModal.style.display && editModal.style.display !== 'none') hideEditModal();\n    }\n  });\n\n  // allow arrow keys to move selected row even when the edit popup is open\n  window.addEventListener('keydown', (ev: KeyboardEvent) => {\n    try {\n      if (ev.key !== 'ArrowUp' && ev.key !== 'ArrowDown') return;\n      const popupVisible = !!(editModal && editModal.style.display && editModal.style.display !== 'none');\n      const active = document.activeElement as HTMLElement | null;\n      const mt = document.getElementById('monitor-table') as HTMLElement | null;\n      const mtHasFocus = mt && active === mt;\n      // only handle arrows when popup is visible OR the monitor table has focus\n      if (!popupVisible && !mtHasFocus) return;\n      ev.preventDefault();\n      ev.stopPropagation();\n      const rows = Array.from(document.querySelectorAll('#monitor-tbody tr')) as HTMLTableRowElement[];\n      if (!rows || rows.length === 0) return;\n      const sel = document.querySelector('#monitor-tbody tr.selected-row') as HTMLTableRowElement | null;\n      let idx = sel ? rows.indexOf(sel) : -1;\n      if (idx === -1) {\n        // no selection, pick first row\n        idx = 0;\n      } else {\n        if (ev.key === 'ArrowUp') idx = Math.max(0, idx - 1);\n        else if (ev.key === 'ArrowDown') idx = Math.min(rows.length - 1, idx + 1);\n      }\n      const next = rows[idx];\n      if (!next) return;\n      const m = next.id.match(/^row-(.+)-(\\d+)$/);\n      if (!m) return;\n      const k = m[1]; const a = parseInt(m[2], 10);\n      // delegate to selectRow which will dispatch melsec_row_selected and focus back to popup input\n      try { selectRow(k, a); } catch (e) { console.warn('selectRow failed', e); }\n    } catch (e) { /* ignore */ }\n  });\n\n  if (editWrite) editWrite.addEventListener('click', async (e) => {\n    e.preventDefault();\n    if (!editTarget) return;\n    const { key, addr } = editTarget;\n    const raw = (editValue && editValue.value) ? editValue.value.trim() : '';\n    try {\n      let words: number[] = [];\n      if (selectedWriteType === 'U16') {\n        const v = /^0x/i.test(raw) ? parseInt(raw.substring(2), 16) : parseInt(raw, 10);\n        words = [ (v & 0xffff) >>> 0 ];\n      } else if (selectedWriteType === 'I16') {\n        const v = parseInt(raw, 10);\n        words = [ (v & 0xffff) >>> 0 ];\n      } else if (selectedWriteType === 'HEX') {\n        const v = /^0x/i.test(raw) ? parseInt(raw.substring(2), 16) : parseInt(raw, 16);\n        words = [ (v & 0xffff) >>> 0 ];\n      } else if (selectedWriteType === 'BIN') {\n        const v = parseInt(raw.replace(/^0b/i, ''), 2);\n        words = [ (v & 0xffff) >>> 0 ];\n      } else if (selectedWriteType === 'ASCII') {\n        const s = raw.padEnd(2, '\\0').slice(0,2);\n        const hi = s.charCodeAt(0) & 0xff;\n        const lo = s.charCodeAt(1) & 0xff;\n        const w = ((hi << 8) | lo) >>> 0;\n        words = [ w & 0xffff ];\n      } else if (selectedWriteType === 'U32' || selectedWriteType === 'I32' || selectedWriteType === 'F32') {\n        // for 32-bit types, require writing to even address; combine into two words low,high\n        // parse number\n        let u32: number = 0;\n        if (selectedWriteType === 'F32') {\n          const f = parseFloat(raw);\n          const buf = new ArrayBuffer(4);\n          const dv = new DataView(buf);\n          dv.setFloat32(0, f, true);\n          u32 = dv.getUint32(0, true);\n        } else if (selectedWriteType === 'U32') {\n          u32 = Number(BigInt(raw));\n        } else {\n          // I32\n          let iv = parseInt(raw, 10);\n          if (iv < 0) iv = (iv >>> 0) as unknown as number;\n          u32 = iv >>> 0;\n        }\n        const low = u32 & 0xffff;\n        const high = (u32 >>> 16) & 0xffff;\n        // if target addr is odd, shift to even and write pair starting at even address\n        const baseAddr = (addr % 2 === 0) ? addr : addr - 1;\n        words = [ low, high ];\n        // perform set_words at baseAddr\n        try {\n          logMonitor(`[TS] invoking set_words key=${key} addr=${baseAddr} words=${JSON.stringify(words)}`);\n          console.log('[TS] invoking set_words', { key, addr: baseAddr, words });\n          await invoke('set_words', { key: key, addr: baseAddr, words: words });\n        } catch (e) {\n          logMonitor(`[TS] set_words error (U32 path): ${e}`);\n          console.error('set_words error (U32 path)', e);\n        }\n        // optimistic UI update for both addresses\n        setWordRow(key, baseAddr, low);\n        setWordRow(key, baseAddr + 1, high);\n        // do NOT hide the popup on write (keep it open per UX)\n        return;\n      }\n      // single-word path\n      try {\n        logMonitor(`[TS] invoking set_words key=${key} addr=${addr} words=${JSON.stringify(words)}`);\n        console.log('[TS] invoking set_words', { key, addr, words });\n        await invoke('set_words', { key: key, addr: addr, words: words });\n      } catch (e) {\n        logMonitor(`[TS] set_words error: ${e}`);\n        console.error('set_words error', e);\n      }\n      setWordRow(key, addr, words.length > 0 ? (words[0] & 0xffff) : 0);\n      // do NOT hide the popup on write\n    } catch (err) {\n      console.warn('write failed', err);\n    }\n  });\n\n  // allow pressing Enter in the edit input to submit the write\n  if (editValue) {\n    editValue.addEventListener('keydown', (ev) => {\n      if (ev.key === 'Enter') {\n        ev.preventDefault();\n        if (editWrite) (editWrite as HTMLButtonElement).click();\n      }\n    });\n  }\n\n  // attach double-click handler to table body\n  const tbody = document.getElementById('monitor-tbody');\n  if (tbody) {\n    tbody.addEventListener('dblclick', (ev) => {\n      let el = ev.target as HTMLElement | null;\n      while (el && el.tagName !== 'TR') el = el.parentElement;\n      if (!el) return;\n      const id = el.id; // e.g. row-D-0 or row-D-0 (we set row id as row-${key}-${addr})\n      if (!id) return;\n      const m = id.match(/^row-(.+)-(\\d+)$/);\n      if (!m) return;\n      const key = m[1];\n      const addr = parseInt(m[2], 10);\n      showEditModal(key, addr);\n    });\n  }\n\n  function parseTarget(s: string | null) {\n    if (!s) return null;\n    const up = s.toUpperCase().trim();\n    let i = 0; while (i < up.length && /[A-Z]/.test(up[i])) i++;\n    if (i === 0) return null;\n    const key = up.slice(0, i); const numPart = up.slice(i).trim(); if (!numPart) return null;\n    const isHex = /[A-F]/i.test(numPart);\n    const addr = isHex ? parseInt(numPart, 16) : parseInt(numPart, 10);\n    if (Number.isNaN(addr)) return null;\n    return { key, addr };\n  }\n\n  function createInitialRows(key: string, addr: number, count: number) {\n    for (let i = 0; i < count; i++) setWordRow(key, addr + i, 0);\n  }\n\n  // Fallback polling is implemented in components/monitor\n\n  // On UI startup, prefetch initial rows for the current monitor target so the table\n  // has 30 rows ready immediately. This will try to call backend `get_words` and\n  // populate rows; if that fails, fall back to creating empty rows.\n  (async () => {\n    try {\n      const rawTarget = ((els['mon-target'] as HTMLInputElement).value || 'D').toString().trim().toUpperCase();\n      let parsed: any = parseTarget(rawTarget);\n      if (!parsed) parsed = { key: rawTarget.replace(/[^A-Z]/g, ''), addr: 0 } as any;\n      const count = 30;\n      try {\n        const vals: number[] = await invoke('get_words', { key: parsed.key, addr: parsed.addr, count: count });\n        if (Array.isArray(vals) && vals.length > 0) {\n          for (let i = 0; i < vals.length; i++) setWordRow(parsed.key, parsed.addr + i, vals[i] & 0xffff);\n          if (vals.length < count) createInitialRows(parsed.key, parsed.addr + vals.length, count - vals.length);\n          logMonitor(`[TS] initial get_words populated ${vals.length} rows for ${parsed.key}${parsed.addr}`);\n        } else {\n          createInitialRows(parsed.key, parsed.addr, count);\n          logMonitor(`[TS] initial get_words returned empty; created ${count} empty rows for ${parsed.key}${parsed.addr}`);\n        }\n      } catch (e) {\n        // backend might not be running yet; create empty rows so UI has something\n        createInitialRows(parsed.key, parsed.addr, count);\n        logMonitor(`[TS] initial get_words failed; created ${count} empty rows for ${parsed.key}${parsed.addr}: ${e}`);\n      }\n    } catch (e) { /* ignore */ }\n\n    // initialize monitor event listeners (monitor, server-status)\n    try { await initEventListeners(); } catch (e) { console.warn('initEventListeners failed', e); }\n\n    // Note: development-only auto listener removed to avoid duplicate monitor events.\n    // Use the normal event registration inside components/monitor.ts (initEventListeners).\n  })();\n\n  const monToggleEl = els['mon-toggle'] as HTMLElement | null;\n  if (monToggleEl) {\n    monToggleEl.addEventListener('click', (_e) => {\n    setTimeout(() => {\n      const btn = els['mon-toggle'] as HTMLElement;\n      const isRunning = btn && btn.textContent && btn.textContent.includes('\u505C\u6B62');\n      if (!isEventApiAvailable() && isRunning) {\n        try {\n          const raw = (els['mon-target'] as HTMLInputElement).value || 'D';\n          let parsed: any = parseTarget(raw);\n          if (!parsed) parsed = { key: raw.replace(/[^A-Z]/g, ''), addr: 0 } as any;\n          if (parsed) startFallbackPolling(parsed.key, parsed.addr, 500);\n        } catch (e) { console.warn('failed to start fallback polling', e); }\n      } else if (!isEventApiAvailable() && !isRunning) stopFallbackPolling();\n    }, 50);\n    });\n  }\n\n});\n\n// stopMock helper removed \u2014 stop is handled inline by mock toggle\n\n// module boundary: no exports required\nexport {};\n"],
  "mappings": "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",
  "names": ["invoke", "parseTarget", "createInitialRows", "e"]
}
